Nginx
=====

# About Nginx

NGINX is open source software for web serving, reverse proxying, caching,
load balancing, media streaming, and more. ... In addition to its HTTP
server capabilities, NGINX can also function as a proxy server for email
(IMAP, POP3, and SMTP) and a reverse proxy and load balancer for HTTP,
TCP, and UDP servers.


## Static Website

File: docker-compose.yml

```yaml
nginx:
  image: nginx:alpine
  ports:
    - "80:80"
  volumes:
    - ./data/conf.d:/etc/nginx/conf.d
    - ./data/html:/usr/share/nginx/html
  restart: unless-stopped
```

## Reverse Proxy

File: docker-compose.yml

```yaml
nginx:
  image: nginx:alpine
  volumes:
    - ./data/conf.d:/etc/nginx/conf.d
    - ./data/ssl:/etc/nginx/ssl
    - ./data/htpasswd:/etc/nginx/htpasswd
  net: host
  restart: unless-stopped
```

> Password file can be generated by:
>> `echo "username:$(openssl passwd -apr1 password)" >> data/htpasswd`

File: default

```nginx
server {
    listen 80 default;
    server_name _;
    return 301 http://blog.example.com/;
}

server {
    listen 80;
    server_name blog.example.com blog.easypi.info;
    location / {
        proxy_pass http://127.0.0.1:6109;
    }
}

server {
    listen 80;
    server_name wiki.example.com wiki.easypi.info;
    location / {
        auth_basic restricted;
        auth_basic_user_file /etc/nginx/htpasswd;
        proxy_pass http://127.0.0.1:8000;
    }
}

server {
    listen 80;
    server_name iot.example.com iot.easypi.info;
    location / {
        proxy_pass http://127.0.0.1:1880;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```


```nginx
rtmp {
    server {
        listen 1935;
        application live {
            live on;
        }
    }
}
```
